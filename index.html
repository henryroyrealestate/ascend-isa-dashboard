<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ascend ISA Dashboard</title>

<style>
    body {
        margin: 0;
        font-family: "Inter", sans-serif;
        background: #f4f7fb;
        color: #1e2a36;
    }

    .header {
        text-align: center;
        padding: 25px 20px 10px;
        background: linear-gradient(180deg, #e7eef7 0%, #f5f8fc 100%);
        border-bottom: 1px solid #d9e1ec;
    }

    .logo {
        width: 260px;
        margin-bottom: 5px;
    }

    h1 {
        font-size: 42px;
        margin: 5px 0 5px;
        font-weight: 700;
    }

    .subtext {
        font-size: 18px;
        color: #526578;
        margin-bottom: 20px;
    }

    /* WORK HUB */
    .workhub {
        max-width: 900px;
        margin: -10px auto 40px;
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 28px rgba(0,0,0,0.12);
        border: 1px solid #e3e8ef;
    }

    .workhub h2 {
        margin-top: 0;
        font-size: 26px;
        font-weight: 700;
        margin-bottom: 20px;
    }

    .status-banner {
        display: none;
        background: #1b4b67;
        color: white;
        padding: 14px;
        border-radius: 10px;
        text-align: center;
        font-size: 17px;
        font-weight: 600;
        margin-bottom: 15px;
    }

    .clocked-time {
        display: none;
        text-align: center;
        font-size: 15px;
        color: #30475e;
        margin-bottom: 20px;
        margin-top: -10px;
        font-weight: 600;
    }

    .clock-btns {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-bottom: 20px;
    }

    .clock-btn {
        flex: 1;
        padding: 14px;
        font-size: 16px;
        border-radius: 10px;
        border: none;
        font-weight: 600;
        cursor: pointer;
        transition: 0.2s;
        color: white;
    }

    .clock-in { background: #15384a; }
    .clock-in:hover { background: #1f4d67; }

    .clock-out { background: #b02a2a; }
    .clock-out:hover { background: #c03a3a; }

    .disabled {
        opacity: 0.3;
        cursor: not-allowed;
    }

    .stats-box {
        text-align: center;
        font-size: 17px;
        font-weight: 600;
        margin-top: 10px;
        color: #2f3f50;
    }

    .secondary {
        font-size: 14px;
        color: #556475;
        margin-top: 5px;
        font-weight: 500;
    }

    .progress-bar-bg {
        width: 100%;
        background: #e6edf5;
        height: 18px;
        border-radius: 10px;
        margin-top: 15px;
        overflow: hidden;
    }

    .progress-bar-fill {
        height: 100%;
        width: 0%;
        transition: width 0.4s ease;
    }

    .green { background: #28a745; }
    .yellow { background: #ffc107; }
    .red { background: #dc3545; }

    /* TABS */
    .tabs {
        display: flex;
        justify-content: center;
        gap: 30px;
        padding: 14px 0;
        background: white;
        max-width: 900px;
        margin: 0 auto 40px;
        border-radius: 14px;
        box-shadow: 0 3px 12px rgba(0,0,0,0.08);
    }

    .tabs a {
        text-decoration: none;
        color: #1e2a36;
        font-weight: 600;
        padding: 8px 18px;
        border-radius: 10px;
    }
    .tabs a:hover { background: #dfe7f0; }

    /* AGENT CARDS */
    .agent-container {
        display: flex;
        justify-content: center;
        gap: 30px;
        padding: 0 20px;
        margin-bottom: 50px;
        flex-wrap: wrap;
    }

    .agent-card {
        background: white;
        border-radius: 18px;
        width: 290px;
        padding: 26px;
        box-shadow: 0 8px 22px rgba(0,0,0,0.08);
        text-align: center;
    }

    .agent-card h2 {
        margin-top: 0;
        font-size: 22px;
        font-weight: 700;
    }

    .btn {
        display: block;
        margin: 10px auto;
        background: #2b4a5a;
        color: white;
        border: none;
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        font-size: 15px;
        cursor: pointer;
        font-weight: 600;
    }
    .btn:hover { background: #3b6173; }

    /* ASSIGNMENT MODULE */
    .assign-card {
        max-width: 1000px;
        margin: 0 auto 60px;
        background: white;
        padding: 35px;
        border-radius: 20px;
        box-shadow: 0 8px 28px rgba(0,0,0,0.10);
        border: 1px solid #e5e9f0;
    }

    .assign-header {
        text-align: center;
        font-size: 26px;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .assign-sub {
        text-align: center;
        color: #6a7a8c;
        margin-bottom: 25px;
        font-size: 16px;
    }

    .assign-tabs {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 25px;
    }

    .assign-tab {
        padding: 10px 22px;
        border-radius: 10px;
        cursor: pointer;
        background: #e7edf3;
        font-weight: 600;
        color: #2f3f50;
        transition: 0.2s;
    }
    .assign-tab.active {
        background: #1b4b67;
        color: white;
    }

    .assign-form {
        max-width: 700px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .assign-form input, .assign-form textarea {
        padding: 12px;
        border-radius: 10px;
        border: 1px solid #bac6d3;
        font-size: 15px;
    }

    textarea {
        min-height: 80px;
        resize: vertical;
    }

    .assign-btn {
        margin-top: 15px;
        background: #1d4e89;
        border: none;
        padding: 14px;
        border-radius: 12px;
        color: white;
        font-size: 17px;
        font-weight: 700;
        cursor: pointer;
    }

    .assign-btn:hover { background: #163d6b; }

    .assign-result {
        display: none;
        margin: 20px auto 0;
        padding: 15px;
        border-radius: 10px;
        background: #d1e7dd;
        color: #0f5132;
        font-size: 16px;
        text-align: center;
        max-width: 600px;
        font-weight: 600;
    }

    .next-up-box {
        margin-top: 25px;
        display: flex;
        justify-content: center;
        gap: 25px;
        flex-wrap: wrap;
    }

    .next-up {
        background: #1d4e89;
        color: white;
        padding: 10px 20px;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
    }

    /* SCRIPT GENERATOR */
    .generator-card {
        background: #ffffff;
        padding: 30px;
        border-radius: 14px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        margin: 0 auto 60px;
        max-width: 900px;
    }

    .generator-card h2 {
        text-align: center;
        margin-bottom: 25px;
        font-size: 26px;
        font-weight: 700;
        color: #1d2d44;
    }

    .generator-row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
        margin-bottom: 30px;
    }

    .gen-btn {
        background-color: #1d4e89;
        border: none;
        color: white;
        padding: 12px 22px;
        font-size: 16px;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.15s;
    }
    .gen-btn:hover { background-color: #163d6b; }

    select {
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 16px;
    }

    .output-box {
        background: #f8fafc;
        border-left: 5px solid #1d4e89;
        padding: 20px;
        border-radius: 12px;
        min-height: 150px;
        white-space: pre-wrap;
        font-size: 15px;
        line-height: 1.5;
    }
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
    <img src="Ascend_Horiz_Logo.png" class="logo">
    <h1>Hi, Kevin</h1>
    <div class="subtext">Every dial is a doorway to an opportunity.</div>
</div>

<!-- WORK HUB -->
<div class="workhub">
    <h2>Ascend Work Hub</h2>

    <div id="statusBanner" class="status-banner">YOU ARE CLOCKED IN</div>
    <div id="clockedTime" class="clocked-time"></div>

    <div class="clock-btns">
        <button id="clockInBtn" class="clock-btn clock-in">Clock In</button>
        <button id="clockOutBtn" class="clock-btn clock-out disabled" disabled>Clock Out</button>
    </div>

    <div class="stats-box">
        <div id="hoursToday">Today's Hours: 0.00</div>
        <div id="weekHours" class="secondary">This Week: 0.00 / 20 hrs</div>
        <div id="remainingHours" class="secondary"></div>
    </div>

    <div class="progress-bar-bg">
        <div class="progress-bar-fill" id="weeklyProgress"></div>
    </div>
</div>

<!-- TABS -->
<div class="tabs">
    <a href="https://batchleads.io" target="_blank">BatchLeads</a>
    <a href="https://docs.google.com/spreadsheets" target="_blank">Google Sheets</a>
</div>

<!-- AGENT CARDS -->
<div class="agent-container">
    <div class="agent-card">
        <h2>Mike Frybarger</h2>
        <button class="btn">Calendly (coming soon)</button>
        <button class="btn">Homebot Seller (coming soon)</button>
    </div>

    <div class="agent-card">
        <h2>Henry Ulrich</h2>
        <a href="https://calendly.com/henryroy" target="_blank">
            <button class="btn">Schedule w/ Henry</button>
        </a>
        <a href="https://hmbt.co/fUNkbh" target="_blank">
            <button class="btn">Homebot Seller</button>
        </a>
    </div>

    <div class="agent-card">
        <h2>Megan Dickerson</h2>
        <a href="https://calendly.com/megandickerson-realestate" target="_blank">
            <button class="btn">Schedule w/ Megan</button></a>
        <a href="https://get.homebot.ai/?id=14257442-1eec-49ec-b010-21fb01435f4b" target="_blank">
            <button class="btn">Homebot Seller</button></a>
    </div>
</div>

<!-- =============================== -->
<!--      ASSIGNMENT MODULE          -->
<!-- =============================== -->
<div class="assign-card">
    <div class="assign-header">Log Assignments (Round Robin)</div>
    <div class="assign-sub">Appointments & Homebot Signups</div>

    <div class="assign-tabs">
        <div class="assign-tab active" id="tabAppointment">Appointment</div>
        <div class="assign-tab" id="tabHomebot">Homebot Signup</div>
    </div>

    <div class="assign-form">
        <input id="aName" type="text" placeholder="Name">
        <input id="aEmail" type="text" placeholder="Email">
        <input id="aAddress" type="text" placeholder="Address">
        <input id="aPhone" type="text" placeholder="Phone">
        <textarea id="aNotes" placeholder="Notes"></textarea>

        <button class="assign-btn" id="assignSubmit">Log Appointment</button>
    </div>

    <div class="assign-result" id="assignResult">Assigned successfully!</div>

    <div class="next-up-box">
        <div class="next-up" id="nextApp">Appointments – Next Up: ...</div>
        <div class="next-up" id="nextHB">Homebot – Next Up: ...</div>
    </div>
</div>

<!-- =============================== -->
<!--      AI SCRIPT GENERATOR        -->
<!-- =============================== -->
<div class="generator-card">
    <h2>ISA Script Generator</h2>

    <div class="generator-row">
        <button class="gen-btn" onclick="generateColdHooks()">Cold Call Intros</button>
        <button class="gen-btn" onclick="generateWarmHooks()">Warm Buyer Follow-Up</button>

        <select id="objectionSelect">
            <option value="notSelling">“We’re not selling.”</option>
            <option value="haveAgent">“We already have an agent.”</option>
            <option value="spring">“We’re waiting until spring.”</option>
            <option value="justLooking">“Just browsing.”</option>
            <option value="notInterested">“Not interested.”</option>
            <option value="stopCalling">“Stop calling.”</option>
            <option value="rental">“We’re keeping it as a rental.”</option>
            <option value="generic">General objections</option>
        </select>

        <button class="gen-btn" onclick="generateObjections()">Handle Objection</button>
    </div>

    <div id="output" class="output-box">
        Click a button to generate scripts…
    </div>
</div>

<!-- =============================== -->
<!-- EXISTING SCRIPT BLOCK (UNTOUCHED) -->
<!-- =============================== -->
<script type="module">
/* YOUR ORIGINAL JS HERE — UNTOUCHED */
/* I'm intentionally leaving this block exactly the same as your current version */
</script>

<!-- =============================== -->
<!-- NEW ASSIGNMENT MODULE SCRIPT    -->
<!-- =============================== -->
<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxz8kOEk7d6jTZwX7cTYqWdLyBAGie1z9cTfz1cPMCWKIBMped8EItWdF2kL4rnYELR/exec";

/* -------- TAB LOGIC -------- */
const tabAppt = document.getElementById("tabAppointment");
const tabHB = document.getElementById("tabHomebot");
const submitBtn = document.getElementById("assignSubmit");

let assignType = "Appointment";

tabAppt.onclick = () => {
    assignType = "Appointment";
    tabAppt.classList.add("active");
    tabHB.classList.remove("active");
    submitBtn.textContent = "Log Appointment";
};

tabHB.onclick = () => {
    assignType = "Homebot";
    tabHB.classList.add("active");
    tabAppt.classList.remove("active");
    submitBtn.textContent = "Log Homebot Signup";
};

/* -------- SUBMIT ASSIGNMENT -------- */
submitBtn.onclick = async () => {
    const payload = new URLSearchParams({
        action: "assign",
        category: assignType,
        name: document.getElementById("aName").value,
        email: document.getElementById("aEmail").value,
        address: document.getElementById("aAddress").value,
        phone: document.getElementById("aPhone").value,
        notes: document.getElementById("aNotes").value
    });

    const res = await fetch(API_URL, { method: "POST", body: payload });
    const data = await res.json();

    const result = document.getElementById("assignResult");
    result.style.display = "block";
    result.textContent = `Assigned to: ${data.assignedTo}`;

    loadRoundRobin();
};

/* -------- LOAD ROUND ROBIN -------- */
async function loadRoundRobin() {
    const res = await fetch(API_URL + "?action=getRR");
    const data = await res.json();

    document.getElementById("nextApp").textContent =
        `Appointments – Next Up: ${data.Appointment}`;

    document.getElementById("nextHB").textContent =
        `Homebot – Next Up: ${data.Homebot}`;
}

loadRoundRobin();
setInterval(loadRoundRobin, 15000);
</script>

</body>
</html>
